# Azure 

Tags: #Azure #CloudComputing #Powershell 

## Enumeración del Tenant con Endpoint

```bash 
El TenantID es un número único '0572bb9f-c2b2-47ee-8496-d18c56d0c067' del dominio que esta regsitrado en Azure y la forma mas fácil de enumerarlo sería utilizando el siguiente 'Endpoint'

❯ https://login.microsoftonline.com/domain.com/.well-known/openid-configuration
	# domain.com = Colocar el dominio del usuario encontrado 

# Validar si el dominio es valido 
❯ https://login.microsoftonline.com/getuserrealm.srf?login=omar.villa@domain.com&xml=1     
```

## Enumeración del Tenant con ADDInternals

* [ADDInternals](https://github.com/Gerenios/AADInternals)

```bash 
❯ Import-Module .\ADDInternals.psd1        # Importar el módulo 

❯ Invoke-ADDIntReconAsOutsider -DomainName domain.com | Format-Table  # Muestra el TenantID, name, brand y muestra si esta activado el 'DesktopSSO enabled'. Si es asi se puede hacer 'Pass-The-PRT'

❯ Get-ADDIntTenantID -Domain domain.com     # Muestra solo el TenantID del dominio 
```

```
❯ Get-ADDIntLoginInformation -UserName omar.villa@domain.com    # Verificar si el correo es valido 
```

## Validar correos con O365creeper

* [o365creeper](https://github.com/LMGsec/o365creeper)

```bash 
❯ python2 o365creeper.py -f dic.txt     # Validar correos en Azure 

	# f = Archivo de correos 'omar.villa@domain.com'
```

## Enumeración de Usuarios en el 'Login' de la Web 

```bash 
1. Si el usuario no existe nos saldrá el siguiente mensaje de error:
	'Este nombre de usuario puede ser incorrecto. Asegurece de que lo ha escrito correctamente. De lo contrario, pongase en contacto con el administrador.'

2. Si el dominio no existe nos saldrá el siguiente mensaje de error:
	'No hemos podido encontrar ninguna cuenta con ese nombre de usuario. Escriba otra dirección u obtenga una nueva cuenta de Microsoft'

3. El usuario y dominio no existe si:
	'Muestra que se puede escribir la contraseña'
```