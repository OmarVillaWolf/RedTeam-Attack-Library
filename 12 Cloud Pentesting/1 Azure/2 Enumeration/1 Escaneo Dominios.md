# Escaneo de dominios

Tags: #Azure #CloudComputing 

## Pasivo 

```bash 
1. Certificates Transparency Reports
	- En 'Details > Certificate Fields > Certificate Subject Alternative Name' se encuentra la raiz 'dominio' y los 'Subdominios' en 'Field Value'
	- Censys

2. Google Cache 
	- Forma manual en los 3 puntos de la pagina web 
	- Waybackmachine 

3. Search Engines 
	- Google, Bing
	- exploit-db.com/google-hacking-database
	- Shodan 'Buscar DBs' con el fin de saber si tienen 'Data Leaks'
	- DNS Recon 'https://dnsdumpster.com/'

Buscar fugas de datos a nivel de 'Buckets, Blobs' o sea almacenamiento de archivos 
	- https://grayhatwarfare.com/
	- https://buckets.grayhatwarfare.com/
	- https://buckets.grayhatwarfare.com/files?keywords=superbanco 
```

## Activo 

* [Hunter-email-validos](https://hunter.io/)

```bash 
1. Brute Force
	- Escaneo con la herramienta 'dirb' a la url 
	- Mirar el codigo fuente 
	- Utilizar el diccionario de Seclist 'directory-list-lowercase-2.3-medium.txt'

2. Enumeración de la WEB con 'inspeccionar' 
	- Ir a el apartado 'Network > Name > Headers' para ver si existe una API y ver si esta solicitando una petición a otra url 
	- Ir a el apartado 'Network > Name > Payload' para ver si se encuentran credenciales en Json de la API

3. Buscar usuarios validos en la pagina Web

4. Shuffling wordlists through DNS engines 
	- <storageaccount>.files.core.windows.net
	- <storageaccount>.files.core.windows.net/<contenedor>
	- <storageaccount>.files.core.windows.net/<contenedor>/?comp=list
```

## Estructura de DNS

```bash 
CNAME    sitioejemplo.z13.web.core.windows.net      # Azure Websites

1. Nombre = sitioejemplo
2. Región = z13
3. Tipo de servicio = web
4. CSP (Proveedor de Servicios en Nube) = core.windows.net

Nota:
	1. Identificar los diferentes servicios en Azure:
❯ https://www.netspi.com/blog/technical-blog/cloud-penetration-testing/enumerating-azure-services/
```

```bash 
# Azure Hosted
❯ CNAME www.cloudejem.com RESOLVES TO cloudejempco3.z13.web.core.windows.net 

# Office365
❯ CNAME autodiscover.cloudejemplo.com RESOLVES TO autodiscover.outlook.com 
```

## Saber si una IP es del dominio de Azure 

```bash 
# Enlace para descargar los rangos de IPs que utiliza Azure hasta el momento 
❯ https://www.microsoft.com/en-us/download/details.aspx?id=56519 
```

